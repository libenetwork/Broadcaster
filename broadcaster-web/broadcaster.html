<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->


    <title>Broadcaster</title>
    <link rel = "stylesheet" href="css/gtk4web.css">
    <link rel = "stylesheet" href="css/fonts.css">
    <link rel = "stylesheet" href="css/style.css">
    <script src = "js/anime.min.js"></script>
    <link rel = "icon" href="img/icon1024.png">
    <script src = "js/anime.min.js"></script>
    <link rel = "stylesheet" href = "css/materialize.min.css">
    <link rel = "stylesheet" href = "css/broadcaster_style.css">

    <script src="js/communicator.js"></script>
    <script>
        refresh_youtube();
    </script>
    <link rel="stylesheet" type="text/css" href="css/popr.css">
    <script src ="js/jquery-3.7.1.min.js"></script>

    <script type="text/javascript" src="./js/popr.js"></script>


</head>
<body>

<div class = "gtk-window main-window" style="border-radius: 0; border: 0 !important;box-shadow: 0 !important;">
    <div class = "gtkheader">
        <div id="logo"><img src="img/icon.png">Broadcaster</div>
        <div>
            <div class="tab active"><img class="tab_icon" src="symbols/skull-symbolic.svg">Сцена 1</div>
        </div>
        <img class = "add_icon" src="symbols/plus-large-symbolic.svg">
    </div>
    <div class = "content row" style="margin: 0; height: 100%;">
        <div class="frame col s12 m12 l9 xl6" style=" margin-top: 0.5em;  padding: 0; height: 100%">
           <div class="video-container">
            <div class = "live-indicator not-show"><img class="button_icon" src="symbols/media-record-symbolic.svg"><div>Live</div></div>

               <div class = "no-video"><img src="symbols/eye-not-looking-symbolic.svg" class = "disactive_icon" style ="height: 7vh">
               </div> <div class="no-video">
                 <p class="no-sources-text">Відкрийте сцену, аби почати трансляцію</p></div>
            <video id="video" style = "width: 100%; height: 100%; object-fit: fill" class="not-show" autoplay playsinline muted style="
"></video></div>
            <div class="button_row">
                <div class = "gtkbutton" id = "open_scene"><img class="button_icon"  src="symbols/explore2-large-symbolic.svg">Відкрити сцену</div>
                <div class = "gtkbutton" onclick = "open_broadcast_window()"><img class="button_icon" src="symbols/podcast-symbolic.svg">Почати трансляції</div>
                <div class = "gtkbutton" onclick = "open_donate_window()"><img src="symbols/donut.svg">Пожертви</div>
                <div class = "gtkbutton live-button inactive" data-action="goLive"><img class="button_icon" src="symbols/media-record-symbolic.svg"><div>Вийти в етер!</div></div>
            </div>

            <div class="button_row" id = "comments">
                <div class = "gtkbutton" onclick = "open_chat_window()"><img style="width: 15pt" src="symbols/chat-bubbles-empty-inverted-symbolic.png">Подивитися коментарі</div>

            </div>
            <div class="audio_sources">
                <div class = "preferences-group">
                    <div class = 'preferences_header'><div class = "caption"><div class = "preferences_caption">Авдіо джерела</div><div class="preferences_subcaption">Додайте джерело авдіо, що мусить бути в трансляції</div> </div>
                        <div class = " popr" data-id="1"><div class = "preferences_sufix"><img class = "sufix_icon button_icon" src="symbols/plus-large-symbolic.svg">Додайте джерела</div></div>

                <div class="popr-box" data-box-id="1">

                </div>



                <script>
                    $(document).ready(function() {
                        $('.popr').popr();
                    });

                </script>
                    </div>
                    <div class = "no-sources">
                        <img class = 'disactive_icon no-source-icon' src = "symbols/sound-wave-alt-symbolic.svg">
                        <div class = "no-sources-text">Нема звуку. Без звуку неможливо почати трансляцію</div>
                    </div>
                    <div id = "source" class="not-show audio_sources preferences-group-body no-scrollbar">
                        
                    </div>
                </div>
            </div>
    </div>

<div style = "height: 100%;" id = "chat"></div>
    </div>

</div>


</div>
<div class = "open_window">
    <iframe id = "window">
        
    </iframe>
</div>
<script src = "js/broadcaster.js"></script>
<script src="js/gtk4web.js"></script>
<script src = "js/openblock.js"></script>
<script type="module" src = "js/connect.js"></script>
<script type="module" src = "gtk.js"></script>
<script type = "module" src = "theme.js"></script>
<script src = "js/coockie.js"></script>
<script type="module" src="https://cdn.jsdelivr.net/npm/@gradio/client@0.1.4/dist/index.min.js"></script>
<script src = "js/audio.js"></script>
<script src="js/materialize.min.js"></script>
<script src="js/generate.js" type="module"></script>
<script src = "js/sources.js"></script>
<script src = "js/grab.js"></script>
<script src = "js/scene.js"></script>
<script src="js/combine_audio.js"></script>
<script src = "js/sockets.js"></script>
<script src="js/live.js"></script>
<script src="js/chat.js" ></script>

<script>     
$('#chat').load("сhat.html");
let scrollbars = document.getElementsByClassName("no-scrollbar");
   for (let i =0; i < scrollbars.length; i++){
    let elem = scrollbars[i];
    let timer;
   elem.addEventListener('scroll', function(e) {

elem.classList.remove('no-scrollbar');
elem.classList.add('scrollbar');
    

clearTimeout(timer);
timer = setTimeout(function() {
     elem.classList.add('no-scrollbar');
     elem.classList.remove('scrollbar');
}, 100);

})}


</script>
</body> 
</html>


